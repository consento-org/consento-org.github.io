<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Consento Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Consento Blog Atom Feed"><title data-react-helmet="true">Decentralized Notification System | Consento</title><meta data-react-helmet="true" property="og:title" content="Decentralized Notification System | Consento"><meta data-react-helmet="true" property="og:url" content="https://consento.org/blocks/notification"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/consento/cc-by-nc-nd/logo/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://consento.org/blocks/notification"><link rel="stylesheet" href="/styles.0d076910.css">
<link rel="preload" href="/styles.a6c4e975.js" as="script">
<link rel="preload" href="/runtime~main.856eef4b.js" as="script">
<link rel="preload" href="/main.fa785ee1.js" as="script">
<link rel="preload" href="/common.cd5355ce.js" as="script">
<link rel="preload" href="/2.20b7a211.js" as="script">
<link rel="preload" href="/1f391b9e.db7a1216.js" as="script">
<link rel="preload" href="/a5576d24.5fef0b60.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbar-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/consento/cc-by-nc-nd/logo/consento-with-text.png" alt="Consento Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/consento/cc-by-nc-nd/logo/consento-with-text.png" alt="Consento Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Consento</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/usecases">Use cases</a><a class="navbar__item navbar__link" href="/team">Team</a><a class="navbar__item navbar__link" href="/supporters">Supporters</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link navbar__button" href="/download">Download</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/consento/cc-by-nc-nd/logo/consento-with-text.png" alt="Consento Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/consento/cc-by-nc-nd/logo/consento-with-text.png" alt="Consento Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Consento</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/about">About</a></li><li class="menu__list-item"><a class="menu__link" href="/usecases">Use cases</a></li><li class="menu__list-item"><a class="menu__link" href="/team">Team</a></li><li class="menu__list-item"><a class="menu__link" href="/supporters">Supporters</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbar__button" href="/download">Download</a></li></ul></div></div></div></nav><div class="main-wrapper"><main><div class="container container--fluid"><div class="margin-vert--lg padding-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><section class="consento_section consento_section__blocks"><h2>Building Blocks</h2><p>
This document is part of the <a href="/blocks">Building Blocks</a> of Consento.
Building blocks are encapsulated systems that we need for Consento but that can
also function on their own and help the entire ecosystem.
</p></section><div class="container"><h1>Decentralized Notification System</h1><p>[State: concept-v2]</p><blockquote><p><strong>TLDR;</strong> Decentralized applications need (mobile) notifications that arrive with certainty
at a group of devices.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>Notification systems for mobile devices and desktops are required to be tunneled through the services
by <a href="https://developers.google.com/web/ilt/pwa/introduction-to-push-notifications" target="_blank" rel="noopener noreferrer">Google</a> and <a href="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1" target="_blank" rel="noopener noreferrer">Apple</a>. These services are deeply tied to the the Developer ID, making the
developer ID responsible for abuse. This means: any decentralized application needs a centralized server
setup for notifications. ðŸ˜”</p><p>The goal is to provide a zero-knowledge, efficient notification server that can pass notifications
from one client to another without being able to look inside the envelope while still preventing spam to
clients. The server is to utilize WebSockets when the application is in the foreground for quicker
processing and to only use push services when necessary.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="prior-art"></a>Prior Art<a class="hash-link" href="#prior-art" title="Direct link to heading">#</a></h2><p>We are particularly motivated to see the <a href="https://github.com/signalapp/Signal-Server/tree/master/service/src/main/java/org/whispersystems/textsecuregcm/push" target="_blank" rel="noopener noreferrer">Signal Notification System</a>. It functions similar to what we have
in mind. It is quick and proven in practice but it lacks a few details important to use. It stops a little short
in terms of the security we need.</p><p>With the v2 of the Consento Notification server we would like to make it as usable for
any kind of future Notification system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="first-attempt--things-that-need-to-be-different"></a>First attempt &amp; Things that need to be different<a class="hash-link" href="#first-attempt--things-that-need-to-be-different" title="Direct link to heading">#</a></h2><p>For the first version of Consento we already developed <a href="https://github.com/consento-org/notification-server/" target="_blank" rel="noopener noreferrer">a notification-server</a>
which taught us important lessons for a second version</p><ol><li>Devices need to be grouped in order to make sure that the notification arrives at the device needed.</li><li>A notification that arrived needs view-receipts in order to stop distributing the notification to unused devices.</li><li>Request Limiting needs to be as restrictive as possible.</li><li>It is a good idea to register devices tokens on every startup.</li><li>Notifications by Apple &amp; Google can not be relied on.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="future-steps"></a>Future Steps<a class="hash-link" href="#future-steps" title="Direct link to heading">#</a></h2><ul><li>Restructure notification code to use hypercore synching and groups.</li><li>Enable <a href="https://en.wikipedia.org/wiki/Shard_(database_architecture)" target="_blank" rel="noopener noreferrer">sharding</a> of the notification servers to remove possible bottle necks.</li><li>Investigate possibility of background notification polling using a DHT instead of signalling servers.</li></ul><footer><small>License: <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a> by <a rel="author" href="https://consento.org/team/martin">Martin Heidegger</a>, <span class="license__year">2021</span></small></footer></div></div><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#prior-art" class="table-of-contents__link">Prior Art</a></li><li><a href="#first-attempt--things-that-need-to-be-different" class="table-of-contents__link">First attempt &amp; Things that need to be different</a></li><li><a href="#future-steps" class="table-of-contents__link">Future Steps</a></li></ul></div></div></div></div></div></main></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://keybase.io/team/consento" target="_blank" rel="noopener noreferrer" class="footer__link-item">Keybase</a></li><li class="footer__item"><a href="https://twitter.com/consentoorg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Develop</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/consento-org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Repository</a></li><li class="footer__item"><a href="https://keybase.io/team/consento" target="_blank" rel="noopener noreferrer" class="footer__link-item">Keybase Chat</a></li><li class="footer__item"><a class="footer__link-item" href="/blocks">Building Blocks</a></li><li class="footer__item"><a class="footer__link-item" href="/">White Paper (upcoming...)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/supporters">Supporters</a></li><li class="footer__item"><a class="footer__link-item" href="/usecases">Use cases</a></li></ul></div></div><div class="footer__eu-funding"><div><a href="https://ledgerproject.eu/" target="_blank"><img src="/img/external/fair-use/ngi-white@2x.png" alt="NGI Ledger"></a></div><p>This project has received funding from the European Unionâ€™s <a href="https://ec.europa.eu/programmes/horizon2020/" target="_blank">Horizon 2020</a> research and innovation programme within the framework of the <a href="https://www.ngi.eu/about/ledger/" target="_blank">LEDGER Project</a> funded under grant agreement <a href="https://cordis.europa.eu/project/id/825268" target="_blank">No825268</a>.</p><div><a href="https://ec.europa.eu/info/" target="_blank"><img src="/img/external/fair-use/eu-flag-low.png" alt="EU"></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2021 Consento - All rights reserved - <a href="/credits">Credits</a> - <a href="/privacy-policy">Privacy Policy</a></div></div></div></footer></div>
<script src="/styles.a6c4e975.js"></script>
<script src="/runtime~main.856eef4b.js"></script>
<script src="/main.fa785ee1.js"></script>
<script src="/common.cd5355ce.js"></script>
<script src="/2.20b7a211.js"></script>
<script src="/1f391b9e.db7a1216.js"></script>
<script src="/a5576d24.5fef0b60.js"></script>
</body>
</html>